"use strict";(self.webpackChunkjotai_advanced_forms_docs=self.webpackChunkjotai_advanced_forms_docs||[]).push([[864],{1812:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>u,frontMatter:()=>s,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"examples","title":"Examples","description":"Basic Form","source":"@site/docs/examples.md","sourceDirName":".","slug":"/examples","permalink":"/jotai-advanced-forms/docs/examples","draft":false,"unlisted":false,"editUrl":"https://github.com/omnidan/jotai-advanced-forms/tree/main/docs/docs/examples.md","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"id":"examples","title":"Examples","sidebar_position":4},"sidebar":"docs","previous":{"title":"API Reference","permalink":"/jotai-advanced-forms/docs/api"}}');var o=t(3420),r=t(8906);const s={id:"examples",title:"Examples",sidebar_position:4},a="Examples",l={},d=[{value:"Basic Form",id:"basic-form",level:2},{value:"Dynamic Fields (Multi-Field)",id:"dynamic-fields-multi-field",level:2}];function m(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",hr:"hr",p:"p",pre:"pre",...(0,r.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"examples",children:"Examples"})}),"\n",(0,o.jsx)(n.h2,{id:"basic-form",children:"Basic Form"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-tsx",children:'import { createForm } from "jotai-advanced-forms";\n\nconst { formFieldAtom, useForm } = createForm();\n\nconst emailField = formFieldAtom({\n  initialState: "",\n  validate: (value) => (!value.includes("@") ? "Invalid email" : undefined),\n  debugLabel: "email",\n});\n\nfunction EmailForm() {\n  const [email, setEmail] = useAtom(emailField);\n  const { submitForm, isSubmitting } = useForm({\n    onValid: () => alert("Form is valid!"),\n    onError: () => alert("Please fix errors!"),\n  });\n\n  return (\n    <form\n      onSubmit={(e) => {\n        e.preventDefault();\n        submitForm();\n      }}\n    >\n      <input\n        value={email.value}\n        onChange={(e) => setEmail(e.target.value)}\n        ref={email.ref}\n      />\n      {email.showError && <span>{email.error}</span>}\n      <button type="submit" disabled={isSubmitting}>\n        Submit\n      </button>\n    </form>\n  );\n}\n'})}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"dynamic-fields-multi-field",children:"Dynamic Fields (Multi-Field)"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-tsx",children:'import { createForm } from "jotai-advanced-forms";\n\nconst { multiFormField, useForm } = createForm();\n\nconst multi = multiFormField({\n  initialState: "",\n  validate: () => (value) => (value.length < 2 ? "Too short" : undefined),\n  debugLabel: "multi",\n});\n\nfunction MultiFieldForm() {\n  const [ids, setIds] = useAtom(multi.usedIdsAtom);\n  const [counter, setCounter] = useAtom(multi.idCounterAtom);\n  const { submitForm } = useForm({\n    onValid: () => alert("Form is valid!"),\n    onError: () => alert("Please fix errors!"),\n  });\n\n  return (\n    <form\n      onSubmit={(e) => {\n        e.preventDefault();\n        submitForm();\n      }}\n    >\n      {ids.map((id) => {\n        const atom = multi.atomFamily(id.toString());\n        const [field, setField] = useAtom(atom);\n        return (\n          <div key={id}>\n            <input\n              value={field.value}\n              onChange={(e) => setField(e.target.value)}\n              ref={field.ref}\n            />\n            {field.showError && <span>{field.error}</span>}\n            <button\n              type="button"\n              onClick={() => setIds(ids.filter((i) => i !== id))}\n            >\n              Remove\n            </button>\n          </div>\n        );\n      })}\n      <button\n        type="button"\n        onClick={() => {\n          setIds([...ids, counter]);\n          setCounter(counter + 1);\n        }}\n      >\n        Add\n      </button>\n      <button type="submit">Submit</button>\n    </form>\n  );\n}\n'})}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsxs)(n.p,{children:["See the ",(0,o.jsx)(n.a,{href:"./api",children:"API Reference"})," for more details."]})]})}function u(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(m,{...e})}):m(e)}},8906:(e,n,t)=>{t.d(n,{R:()=>s,x:()=>a});var i=t(6672);const o={},r=i.createContext(o);function s(e){const n=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:s(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);